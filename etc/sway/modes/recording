set $mode_recording "<span foreground='$base0A'>雷</span> \
<span foreground='$base05'><b>Screen</b></span> <span foreground='$base0A'>(<b>w</b>)</span> \
<span foreground='$base01'>—</span> \
<span foreground='$base05'><b>Screen (+ Mic)</b></span> <span foreground='$base0A'>(<b>Shift+w</b>)</span> \
<span foreground='$base01'>—</span> \
<span foreground='$base05'><b>Region</b></span> <span foreground='$base0A'>(<b>r</b>)</span> \
<span foreground='$base01'>—</span> \
<span foreground='$base05'><b>Region (+ Mic)</b></span> <span foreground='$base0A'>(<b>Shift+r</b>)</span>"

set $mode_recording_on "<span foreground='$base0A'>壘</span> \
<span foreground='$base05'><b>Exit</b></span> <span foreground='$base0A'>(<b>ESC</b>)</span>"

mode --pango_markup $mode_recording_on {
  bindsym Escape exec killall -s SIGINT wf-recorder, mode "default"
}

mode --pango_markup $mode_recording {
  # record focused window without audio
  bindsym w exec killall -s SIGINT wf-recorder \
    || wf-recorder --audio=0 -o $(swaymsg -t get_outputs | jq -r '.[] | select(.focused) | .name') -f $screenrec_file, mode $mode_recording_on

  # record focused window with audio
  bindsym Shift+w exec killall -s SIGINT wf-recorder \
    || wf-recorder --audio -o $(swaymsg -t get_outputs | jq -r '.[] | select(.focused) | .name') -f $screenrec_file, mode $mode_recording_on

  # record whole screen without audio
  bindsym r exec killall -s SIGINT wf-recorder \
    || wf-recorder --audio=0 -g "$(slurp -d)" -f $screenrec_file, mode $mode_recording_on

  # record whole screen with audio
  bindsym Shift+r exec killall -s SIGINT wf-recorder \
    || wf-recorder --audio -g "$(slurp -d)" -f $screenrec_file, mode $mode_recording_on

  # return to default mode
  bindsym Escape mode "default"
  bindsym Return mode "default"
}

# launch recording mode
bindsym $mod+Shift+r mode $mode_recording

# vim: set filetype=swayconfig foldmethod=marker foldlevel=0 nowrap:
